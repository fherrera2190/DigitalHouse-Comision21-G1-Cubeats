<!DOCTYPE html>
<html lang="es">
<%- include('./partials/head', { title : 'Cubeats' }) %>

<body class="font-Manrope text-base bg-black text-white font-medium flex flex-col min-h-screen">
  <%- include("./partials/header") %>
  <main class="flex-1 grow">
    <article class="flex flex-col gap-7 py-2 px-4 md:py-6 md:px-14 container mx-auto">
      <div>
        <p class="text-xl border-b-2 pb-1 font-semibold border-white w-fit">
          Pistas
        </p>
      </div>
      <form action="/products/search" method="GET">
        <div class="flex items-center relative">
          <input type="text" placeholder="Busca música, géneros o productores" class="pl-12 py-4 bg-zinc-900 flex justify-center items-center gap-4 w-full z-0 truncate" name="keywords" id="query" />
          <i class="fa-solid fa-magnifying-glass absolute left-4 text-zinc-200 text-xl z-40"></i>
          <a href="/products/search" class="fa-solid fa-xmark absolute right-4 text-white text-2xl"></a>
        </div>
      </form>
      <% if (locals.errors && errors.query) { %>
      <div class="flex items-center gap-4 py-7 bg-orange-600 rounded-sm pl-5 text-black font-normal">
        <i class="fa-solid fa-circle-exclamation text-2xl"></i>
        <span id="input-error" class="error" aria-live="polite">
          <%= errors.query.msg %>
        </span>
      </div>
      <% } %> <% if (products.length > 0) { %>
      <div class="flex flex-col items-start gap-7 font-semibold text-zinc-300">
        <hr class="flex-1 border border-zinc-800 w-full" />
        <div class="flex flex-col sm:flex-row sm:gap-4 justify-between w-full">
          <div class="items-center hidden sm:flex justify-between gap-3">
            <i class="fa-solid fa-sliders text-lg"></i>
            <p>Géneros</p>
            <p>Duración</p>
            <p>BPM</p>
          </div>
          <div class="flex items-center justify-between gap-3">
            <div class="flex items-center gap-3">
              <i class="fa-regular fa-clock text-xl"></i>
              <p>Recientes</p>
            </div>
            <div class="flex items-center gap-3">
              <i class="fa-solid fa-fire text-xl"></i>
              <p>Populares</p>
            </div>
            <div class="flex items-center gap-3 text-white">
              <i class="fa-solid fa-chevron-down text-xl"></i>
              <p class="line-clamp-1">Mejor coincidencia</p>
            </div>
          </div>
        </div>
      </div>
    </article>

    <article class="flex flex-col text-center items-center justify-center gap-5 px-4 py-7 md:py-6 sm:px-14 container mx-auto">
      <%- include("./partials/cardsProduct") %> <% } else { %>
      <hr class="flex-1 border border-zinc-800 w-full" />
      <div class="grid grid-cols-[auto,0.5fr,2fr,0.5fr,auto] justify-between items-center gap-4">
        <p class="text-base border-b-2 pb-1 font-semibold border-white w-fit">
          No hay resultados que coincidan con tu búsqueda.
        </p>
      </div>
    </article>
    <% } %>
  </main>
  <%- include('./partials/footer.ejs')%>
  <script src="https://unpkg.com/wavesurfer.js"></script>
  <script type="module" src="/js/wave.js"></script>
</body>

</html>